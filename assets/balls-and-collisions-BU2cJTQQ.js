import"./modulepreload-polyfill-B5Qt9EMX.js";const p=document.querySelector("canvas"),e=p.getContext("2d"),a=window.innerWidth,u=window.innerHeight;p.width=a;p.height=u;const G=9;let o=[];p.addEventListener("click",n=>{const t=new k(n.x,n.y);o.push(t)});function m(n,t){return n[0]*t[0]+n[1]*t[1]}function I(n,t){const s=P(n,t),c=V(s,t);return{along:s,perp:c}}function S(...n){let t=[0,0];for(const s of n)t=R(t,s);return t}function R(n,t){return[n[0]+t[0],n[1]+t[1]]}function V(n,t){return[t[0]-n[0],t[1]-n[1]]}function P(n,t){const s=j(n),c=m(s,t);return[c*s[0],c*s[1]]}function Y(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function j(n){const t=Y(n);return[n[0]/t,n[1]/t]}function y(n,t){return[t[0]*n,t[1]*n]}class k{x=0;y=0;vx=0;vy=0;radius=50;mass=10;color=`hsl(${Math.random()*360}, 60%, 50%)`;constructor(t,s){this.x=t,this.y=s}update(t){let s=0,c=G;this.vx+=s*t*.99,this.vy+=c*t*.99,this.x+=this.vx*t,this.y+=this.vy*t}draw(){e.fillStyle=this.color,e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.fill()}}function B(){for(let t=0;t<o.length;t++){const s=u-10;o[t].y+o[t].radius>s&&(o[t].y=s-o[t].radius,o[t].vy*=-1),o[t].y-o[t].radius<0&&(o[t].y=o[t].radius,o[t].vy*=-1),o[t].x-o[t].radius<0&&(o[t].x=o[t].radius,o[t].vx*=-1),o[t].x+o[t].radius>a&&(o[t].x=a-o[t].radius,o[t].vx*=-1);for(let c=t+1;c<o.length;c++){const i=o[t],l=o[c],g=l.x-i.x,v=l.y-i.y,h=Math.sqrt(g*g+v*v);if(h>=i.radius+l.radius)continue;const r=[g/h,v/h],q=y(i.radius+l.radius-h,r);[l.x,l.y]=R([l.x,l.y],y(.5,q)),[i.x,i.y]=R([i.x,i.y],y(-.5,q));const b=I(r,[l.vx,l.vy]),w=I(r,[i.vx,i.vy]);if(m(V(w.along,b.along),r)>0)continue;const f=i.mass,d=l.mass,M=m(r,w.along),A=m(r,b.along),E=((f-1*d)*M+2*d*A)/(f+d),F=((d-1*f)*A+2*f*M)/(f+d),C=S(y(E,r),w.perp),H=S(y(F,r),b.perp);[i.vx,i.vy]=[C[0],C[1]],[l.vx,l.vy]=[H[0],H[1]]}}}function D(){e.fillStyle="white",e.fillRect(0,u-10,a,10),e.fillRect(0,0,a,10),e.fillRect(0,0,10,u),e.fillRect(a-10,0,10,u)}let x=0;function W(n){e.fillStyle="#282828",e.fillRect(0,0,a,u),x==0&&(x=n);const t=Math.min(n-x,50);x=n;for(const s of o)s.update(t/100);for(let s=0;s<4;s++)B();for(const s of o)s.draw();D(),requestAnimationFrame(W)}requestAnimationFrame(W);
